var tinymceController={cmsSettings:null,lang_code:"ru",working:null,inProgress:null,config:null,getCmsOpt:function(name,defaultVal){if(!this.cmsSettings)return defaultVal;return(typeof this.cmsSettings[name]=="undefined"?defaultVal:this.cmsSettings[name])},getLanguage:function(){if(this.lang_code=="ru")return"ru";else if(this.lang_code=="ch")return"zh";else if(this.lang_code=="en")return"en";else if(this.lang_code=='ar')return'ar';else if(this.lang_code=='fr')return'fr';else if(this.lang_code=='de')return'de';return"ru"},getDirectionality:function(){if(this.lang_code=='ar')return'rtl';return'ltr'},addControls:function(element){var self=this;if(this.working&&element.querySelectorAll&&tinyMCE){this.hideAllMenus();var areas=element.querySelectorAll('textarea.mceEditor, div.mceEditor');if(areas){var ids=[];for(var i=0;i<areas.length;i++){if(areas[i].className.split(' ').indexOf("mceEditor")>-1&&areas[i].id){if(!tinyMCE.get(areas[i].id)){ids.push(areas[i].id)}}}if(ids.length>0){window.setTimeout(function(){for(var j=0;j<ids.length;j++){self.setConfig(ids[j])}},2)}}}},setConfig:function(id){var self=this;var elem=document.getElementById(id);var toolbarOpt=elem.getAttribute("data-toolbar");var inlineMode=elem.getAttribute("data-mode_inline");var heightOpt=parseInt(elem.getAttribute("data-height"));var config=!!tinyMCE.settings?jQuery.extend({},tinyMCE.settings):jQuery.extend({},this.config);var toolbarRow=1;var height={min:60,max:900};if(window.JS_CHANGE_EDITOR&&!window.isPartner){var message=document.createElement('div');message.className='message';message.innerHTML=window.JS_CHANGE_EDITOR;elem.insertAdjacentElement('beforebegin',message)}if(toolbarOpt){toolbarOpt=toolbarOpt.replace(new RegExp(" ","g"),"");toolbarOpt=toolbarOpt.split(",");delete config.theme_advanced_buttons1;delete config.theme_advanced_buttons2;delete config.theme_advanced_buttons3;for(var i=0;i<toolbarOpt.length;i++){if(typeof config["theme_advanced_buttons"+toolbarRow]==='undefined'){config["theme_advanced_buttons"+toolbarRow]=""}switch(toolbarOpt[i]){case"clipboard":config["theme_advanced_buttons"+toolbarRow]+=",undo,redo";break;case"fontstyles":config["theme_advanced_buttons"+toolbarRow]+=",fontselect,fontsizeselect";break;case"styles":config["theme_advanced_buttons"+toolbarRow]+=",formatselect,fontselect,fontsizeselect";break;case"basicstyles":config["theme_advanced_buttons"+toolbarRow]+=",bold,italic,removeformat";break;case"insert":config["theme_advanced_buttons"+toolbarRow]+=",s3image,image,table,hr,s3media,media,s3style";break;case"find":config["theme_advanced_buttons"+toolbarRow]+=",search";break;case"mode":config["theme_advanced_buttons"+toolbarRow]+=",code";break;case"/":toolbarRow++;break;case"paragraph":config["theme_advanced_buttons"+toolbarRow]+=",justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,outdent,indent";break;case"button":config["theme_advanced_buttons"+toolbarRow]+=",s3button";break;case"links":config["theme_advanced_buttons"+toolbarRow]+=",s3file,s3link,link,unlink,anchor,noindex";break;case"shop":config["theme_advanced_buttons"+toolbarRow]+=",s3shop,s3folder";break;case"map":config["theme_advanced_buttons"+toolbarRow]+="";break;case"colors":config["theme_advanced_buttons"+toolbarRow]+=",forecolor,backcolor";break}}}if(inlineMode){config.force_p_newlines=false;config.force_br_newlines=true;config.forced_root_block='';config.height="100"}if(heightOpt){heightOpt=heightOpt>height.max?height.max:heightOpt<height.min?height.min:heightOpt;config.height=heightOpt}if(!tinymce.get(id)){new tinymce.Editor(id,config).render()}},hideAllMenus:function(){for(var instanceName in tinyMCE.instances){if(!tinyMCE.isInstance(tinyMCE.instances[instanceName]))continue;var inst=tinyMCE.instances[instanceName];TinyMCE_AdvancedTheme._hideMenus(inst.editorId)}},focusControls:function(element){if(this.working&&element.getElementsByTagName&&tinyMCE){var areas=element.getElementsByTagName('TEXTAREA');if(areas){for(var i=0;i<areas.length;i++){if(areas[i].className=="mceEditor"&&areas[i].id){var a=tinyMCE.get(areas[i].id);if(a)a.focus()}}}}},moveMenusBy:function(element,deltaX,deltaY){if(this.working&&tinyMCE&&tinyMCE.instances){var areas=element.getElementsByTagName('TEXTAREA');for(var i=0;i<areas.length;i++){if(areas[i].className=="mceEditor"&&areas[i].id){var a=tinyMCE.getInstanceById(areas[i].id);if(a){var fcml=new TinyMCE_Layer(a.editorId+'_fcMenu'),bcml=new TinyMCE_Layer(a.editorId+'_bcMenu');if(fcml.exists()&&fcml.isVisible())fcml.moveBy(deltaX,deltaY);if(bcml.exists()&&bcml.isVisible())bcml.moveBy(deltaX,deltaY)}}}}},removeControls:function(element){if(this.working&&element.getElementsByTagName&&tinyMCE){var areas=element.getElementsByTagName('TEXTAREA');if(areas){for(var i=0;i<areas.length;i++){if(areas[i].className=="mceEditor"&&areas[i].id){var inst=tinyMCE.get(areas[i].id);if(inst){inst.remove()}}}}}},getContent:function(element){if(element){var inst=tinyMCE.get(element.id);if(inst)return inst.getContent()}return''},deleteMCEControl:function(control_id){var inst=tinyMCE.getInstanceById(control_id);if(inst){inst.switchSettings();var editor_id=inst.editorId;if(editor_id){var tmpInstances=new Array();for(var instanceName in tinyMCE.instances){var instance=tinyMCE.instances[instanceName];if(!tinyMCE.isInstance(instance))continue;if(instanceName!=editor_id)tmpInstances[instanceName]=instance}tinyMCE.instances=tmpInstances;tinyMCE.selectedElement=null;tinyMCE.selectedInstance=null;var replaceElement=document.getElementById(editor_id+"_parent");if(replaceElement&&replaceElement.parentNode){replaceElement.parentNode.removeChild(replaceElement)}}}},getAdvancedButtonList:function(rowIdx,ver_id){var bl="";switch(rowIdx){case 1:bl="bullist,numlist,s3image,image,styleprops,s3shop,s3file,s3link,link,unlink,code,tablecontrols,separator,flash,"+"s3media,"+"media,s3button,separator,search,replace,separator,print";break;case 2:bl="bold,italic,underline,strikethrough,removeformat,formatselect,fontselect,fontsizeselect,noindex,spellchecker,fullscreen";break;default:bl="undo,redo,cleanup,cut,hr,copy,paste,pastetext,pasteword,separator,sub,sup,charmap,anchor,outdent,indent,ltr,rtl,justifyleft,justifycenter,justifyright,justifyfull,forecolor,backcolor";break}return bl},getPluginList:function(ver_id){var pl="spellchecker,fullscreen,inlinepopups,s3link,advlink,s3image,s3file,s3shop,style,table,paste,advimage,searchreplace,print,contextmenu,directionality,noneditable,media,noindex";pl+=",s3media,s3button";return pl},init:function(lang_code,_styles,styles_version,ver_id,cmsSettings){this.lang_code=lang_code;this.cmsSettings=cmsSettings;if(tinyMCE){this.config={document_base_url:this.site_domain_prot,language:tinymceController.getLanguage(),mode:"none",editor_selector:"mceEditor",theme:"advanced",plugins:tinymceController.getPluginList(ver_id),theme_advanced_buttons1:tinymceController.getAdvancedButtonList(1,ver_id),theme_advanced_buttons2:tinymceController.getAdvancedButtonList(2,ver_id),theme_advanced_buttons3:tinymceController.getAdvancedButtonList(3,ver_id),theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",access:access,cleanup:true,verify_html:tinymceController.getCmsOpt("verify_html",true),skin:"o2k7",dialog_type:"modal",accessibility_focus:false,entity_encoding:"named",height:"400",paste_force_cleanup_wordpaste:true,paste_use_dialog:false,paste_convert_headers_to_strong:false,paste_auto_cleanup_on_paste:true,paste_convert_middot_lists:true,paste_unindented_list_class:"unindentedList",paste_remove_spans:true,paste_remove_styles:true,paste_strip_class_attributes:"all",paste_postprocess:function(pl,o){o.node.innerHTML=o.node.innerHTML.replace(/\<br[^\>]*\/?>$/,'')},theme_advanced_resizing:true,theme_advanced_resize_horizontal:true,theme_advanced_statusbar_location:"bottom",theme_advanced_resizing_use_cookie:false,table_styles:_styles,auto_reset_designmode:true,convert_urls:false,button_tile_map:true,inline:true,convert_fonts_to_spans:true,urlconverter_callback:"myCustomURLConverter",cleanup_callback:"myCustomCleanup",gecko_spellcheck:false,content_css:'https://'+document.domain+"/my/s3/css/tinymce.css?v="+styles_version,theme_advanced_font_sizes:"8pt,9pt,10pt,11pt,12pt,13pt,14pt,15pt,18pt,24pt,36pt,48pt",theme_advanced_blockformats:"p,div,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp",inline_styles:true,media_strict:false,directionality:tinymceController.getDirectionality(),valid_children:"+body[style]"+",+a[p]"+",+strong[p|a|ul|li|em]"+",+p[table]"+",ol[li]"+",ul[li|h2|h3|h4]",valid_elements:tinymceController.getValidElements(),extended_valid_elements:tinymceController.getExtendedValidElements(),force_p_newlines:true,apply_source_formatting:true,spellchecker_languages:"+Русский=ru,English=en",external_image_list_url:"http://removeme/-/cms/v1/image/image.list.php?"+access,setup:function(editor){editor.onKeyDown.add(function(editor,event){var keyCode=event.keyCode||event.which,ctrlKey=event.ctrlKey||event.metaKey,shiftKey=event.shiftKey;var elem=document.getElementById(editor.id);var inlineMode=elem.getAttribute("data-mode_inline");if(inlineMode&&keyCode==13&&shiftKey){event.preventDefault()}if(ctrlKey&&keyCode==83){event.preventDefault();setTimeout(function(){parent.util.submitFormFromIframe($(editor.formElement))},100)}else if(keyCode==27){parent.popupController.closeLastPopup()}})}};tinyMCE.init(this.config);this.working=true}},getValidElements:function(){if(this.cmsSettings&&!this.cmsSettings.verify_html){return"*[*]"}var els="-a[style|rel|rev|charset|hreflang|id|lang|tabindex|accesskey|type|dir<ltr?rtl"+"|name|href|target|title|class|onfocus|onblur|onclick|onmouseout|onmouseover|onmouseup],"+"abbr,"+"acronym,"+"address[class|align|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"applet,"+"area[shape|coords|href|alt|title|onclick|target],"+"base[href|target],"+"basefont[color|face|id|size],"+"bdo[class|dir<ltr?rtl|id|lang|style|title],"+"big,"+"blockquote[dir|style|cite|class|dir<ltr?rtl|id|lang|onclick|ondblclick"+"|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout"+"|onmouseover|onmouseup|style|title],"+"body[alink|background|bgcolor|class|dir<ltr?rtl|id|lang|link|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onload|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|onunload|style|title|text|vlink],"+"br,"+"button[onclick|onfocus],"+"caption,"+"center[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"cite,"+"code[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id"+"|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown"+"|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title"+"|valign<baseline?bottom?middle?top|width],"+"colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl"+"|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown"+"|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title"+"|valign<baseline?bottom?middle?top|width],"+"dd[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],"+"del[cite|class|datetime|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"dfn[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"dir[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"div[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"dl[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"dt[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],"+"fieldset[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"font[class|color|dir<ltr?rtl|face|id|lang|size|style|title],"+"form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|id|lang"+"|method|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onreset|onsubmit"+"|style|title|target],"+"frame[class|frameborder|id|longdesc|marginheight|marginwidth|name"+"|noresize<noresize|scrolling<auto?no?yes|src|style|title],"+"frameset[class|cols|id|onload|onunload|rows|style|title],"+"h1[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"h2[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"h3[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"h4[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"h5[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"h6[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"head[dir<ltr?rtl|lang|profile],"+"hr[align<center?left?right|class|dir<ltr?rtl|id|lang|noshade<noshade|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|size|style|title|width],"+"html[dir<ltr?rtl|lang|version],"+"i[class|style|itemprop|itemscope],"+"iframe[align<bottom?left?middle?right?top|class|frameborder|height|id"+"|longdesc|marginheight|marginwidth|name|scrolling<auto?no?yes|src|style"+"|title|width],"+"img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height"+"|hspace|id|ismap<ismap|lang|longdesc|name|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|src|style|title|usemap|vspace|width|itemprop|itemscope],"+"input[accept|accesskey|align<bottom?left?middle?right?top|alt"+"|checked<checked|class|dir<ltr?rtl|disabled<disabled|id|ismap<ismap|lang"+"|maxlength|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect"+"|readonly<readonly|size|src|style|tabindex|title"+"|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text"+"|usemap|value],"+"ins[cite|class|datetime|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"isindex[class|dir<ltr?rtl|id|lang|prompt|style|title],"+"kbd[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"label[accesskey|class|dir<ltr?rtl|for|id|lang|onblur|onclick|ondblclick"+"|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout"+"|onmouseover|onmouseup|style|title],"+"legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|id|lang"+"|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"li[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type"+"|value],"+"link[charset|class|dir<ltr?rtl|href|hreflang|id|lang|media|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|rel|rev|style|title|target|type],"+"map[class|dir<ltr?rtl|id|lang|name|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"menu[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],"+"marquee[width|height|hspace|vspace|bgcolor|direction|loop|scrolldelay|truespeed|scrollamount],"+"noframes[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"noscript[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"object[align<bottom?left?middle?right?top|archive|border|class|classid"+"|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|id|lang|name"+"|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|standby|style|tabindex|title|type|usemap"+"|vspace|width],"+"ol[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|start|style|title|type],"+"optgroup[class|dir<ltr?rtl|disabled<disabled|id|label|lang|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|style|title],"+"option[class|dir<ltr?rtl|disabled<disabled|id|label|lang|onclick|ondblclick"+"|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout"+"|onmouseover|onmouseup|selected<selected|style|title|value],"+"#p[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|style|title|onclick|itemprop|itemscope],"+"param[id|name|type|value|valuetype<DATA?OBJECT?REF],"+"pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|id|lang|onclick|ondblclick"+"|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout"+"|onmouseover|onmouseup|style|title|width],"+"q[cite|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"s[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],"+"samp[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"script[charset|defer|language|src|type],"+"select[class|dir<ltr?rtl|disabled<disabled|id|lang|multiple<multiple|name"+"|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style"+"|tabindex|title],"+"small[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"span[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"strike[class|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title],"+"-strong/b,"+"style[dir<ltr?rtl|lang|media|title|type],"+"sub[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"sup[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title],"+"table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|class"+"|dir<ltr?rtl|frame|height|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rules"+"|style|summary|title|width],"+"tbody[align<center?char?justify?left?right|char|class|charoff|dir<ltr?rtl|id"+"|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown"+"|onmousemove|onmouseout|onmouseover|onmouseup|style|title"+"|valign<baseline?bottom?middle?top],"+"td[abbr|align|axis|bgcolor|char|charoff|class"+"|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup"+"|style|title|valign|width],"+"textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|id|lang|name"+"|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect"+"|readonly<readonly|rows|style|tabindex|title],"+"tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id"+"|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown"+"|onmousemove|onmouseout|onmouseover|onmouseup|style|title"+"|valign<baseline?bottom?middle?top],"+"th[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class"+"|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|onclick"+"|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove"+"|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup"+"|style|title|valign<baseline?bottom?middle?top|width],"+"thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id"+"|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown"+"|onmousemove|onmouseout|onmouseover|onmouseup|style|title"+"|valign<baseline?bottom?middle?top],"+"title[dir<ltr?rtl|lang],"+"tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class"+"|rowspan|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title|valign<baseline?bottom?middle?top],"+"tt[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],"+"u[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup"+"|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],"+"ul[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown"+"|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover"+"|onmouseup|style|title|type],"+"var[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress"+"|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style"+"|title]";return els},getExtendedValidElements:function(){if(this.cmsSettings&&!this.cmsSettings.verify_html)return"";var els="-a[style|rel|rev|charset|hreflang|id|lang|tabindex|accesskey|type|dir<ltr?rtl|name|href|target|title|class|onfocus|onblur|onclick|onmouseout|onmouseover|onmouseup],"+"#p[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|style|title|onclick|itemprop|itemscope],"+"-strong/-b[class|style],"+"-em/-i[class|style|itemprop|itemscope],"+"-strike[class|style],"+"-u[class|style],"+"iframe[align|frameborder|height|hspace|name|scrolling|src|vspace|width],"+"noindex";return els}};function myCustomURLConverter(url,node,on_save){url=url.replace(/http:\/\/removeme/gi,"");if(url.search(/https?\:\/\/cp\d{1,2}\.megagroup\.ru\/d\/[\d]+\/[dt]\//gi)===0){var check_link;check_link=url.match(/\/d\/[\d]+\/[dt]\//gi);if(check_link){check_link=Number(check_link[0].replace(/\/[dt]\//gi,""));if(check_link===VER_ID){url=url.replace(/https?\:\/\/cp\d{1,2}\.megagroup\.ru/gi,"")}}}url=url.replace(/http:\/\/oml.ru/gi,"");url=url.replace(new RegExp("http:\/\/"+tinymceController.site_domain+"([^.])","gi"),"$1");return url}function myCustomCleanup(type,value){switch(type){case"get_from_editor":value=value.replace(/http:\/\/removeme/gi,"");value=value.replace(/http:\/\/(?:www\.)?oml.ru(\/d\/\d+\/[dt]\/)/gi,"$1");value=value.replace(/\<noindex\>/gi,"<!--noindex-->");value=value.replace(/\<\/noindex\>/gi,"<!--/noindex-->");value=value.replace(new RegExp("http:\/\/"+tinymceController.site_domain+"(\/d\/\d+\/[dt]\/)","gi"),"$1");break;case"insert_to_editor":value=value.replace(/http:\/\/removeme/gi,"");value=value.replace(/http:\/\/(?:www\.)?oml.ru(\/d\/\d+\/[dt]\/)/gi,"$1");value=value.replace(/\<noindex\>/gi,"<!--noindex-->");value=value.replace(/\<\/noindex\>/gi,"<!--/noindex-->");value=value.replace(new RegExp("http:\/\/"+tinymceController.site_domain+"(\/d\/\d+\/[dt]\/)","gi"),"$1");break;case"get_from_editor_dom":break;case"insert_to_editor_dom":break}return value}